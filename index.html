<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiefs Playoff Simulator 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .chiefs-red { background-color: #E31837; }
        .chiefs-gold { color: #FFB81C; }
        
        /* Scrollbar styling */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .team-row { transition: all 0.2s ease; }
        .game-card { transition: all 0.2s ease; }
        .game-card:hover { transform: translateY(-1px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        
        /* Toggle Button Selected States */
        .btn-selected-away { background-color: #E31837; color: white; border-color: #E31837; }
        .btn-selected-home { background-color: #004C54; color: white; border-color: #004C54; } 
        /* Dynamic coloring handled by JS, these are fallbacks */

        .seed-badge { font-family: 'Courier New', monospace; font-weight: 800; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden text-gray-800">

    <!-- Header -->
    <header class="chiefs-red text-white shadow-lg shrink-0 z-20 relative">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-white p-1.5 rounded-full w-10 h-10 flex items-center justify-center shadow-md">
                    <span class="text-xl font-bold text-[#E31837]">KC</span>
                </div>
                <div class="leading-tight">
                    <h1 class="text-lg md:text-xl font-black uppercase tracking-wider">Playoff Machine</h1>
                    <p class="text-[10px] md:text-xs text-white/80 font-medium">Week 15-18 Simulator</p>
                </div>
            </div>
            
            <div id="status-container" class="flex flex-col items-end">
                <div id="status-banner" class="px-3 py-1.5 rounded bg-gray-900 text-white font-bold text-sm shadow-lg animate-pulse border border-white/20">
                    <i class="fas fa-circle-notch fa-spin mr-2"></i> LOADING...
                </div>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="flex-1 flex flex-col md:flex-row overflow-hidden relative">
        
        <!-- Left Panel: Schedule (Scrollable) -->
        <div class="w-full md:w-2/3 lg:w-3/4 flex flex-col bg-gray-100 border-r border-gray-200 h-full">
            
            <!-- Toolbar -->
            <div class="bg-white px-4 py-3 border-b border-gray-200 flex justify-between items-center shadow-sm z-10 sticky top-0">
                <div class="flex items-center gap-2 text-sm text-gray-600">
                    <i class="fas fa-filter"></i>
                    <span class="hidden sm:inline">Filter:</span>
                    <button class="font-bold text-gray-900 hover:text-[#E31837]">Key Games Only</button>
                </div>
                <button onclick="resetSimulation()" class="text-xs bg-gray-200 hover:bg-gray-300 text-gray-700 px-3 py-1.5 rounded-md font-bold transition flex items-center gap-2">
                    <i class="fas fa-undo"></i> Reset
                </button>
            </div>

            <!-- Games Grid -->
            <div id="schedule-container" class="flex-1 overflow-y-auto custom-scroll p-4 space-y-6 pb-20">
                <!-- Injected via JS -->
            </div>
        </div>

        <!-- Right Panel: Standings (Fixed width) -->
        <div class="w-full md:w-1/3 lg:w-1/4 bg-white shadow-2xl z-30 flex flex-col border-t md:border-t-0 border-gray-200 h-full">
            <div class="p-3 bg-gray-900 text-white shrink-0 flex justify-between items-center shadow-md">
                <h2 class="font-bold text-sm uppercase tracking-wide"><i class="fas fa-list-ol mr-2 text-[#E31837]"></i>AFC Standings</h2>
                <span class="text-[10px] bg-gray-700 px-2 py-0.5 rounded text-gray-300">Top 7 In</span>
            </div>
            
            <div class="flex-1 overflow-y-auto custom-scroll">
                <table class="w-full text-sm border-collapse">
                    <thead class="text-[10px] uppercase text-gray-500 bg-gray-50 sticky top-0 z-10 shadow-sm">
                        <tr>
                            <th class="py-2 pl-3 text-left w-8">Rk</th>
                            <th class="py-2 text-left">Team</th>
                            <th class="py-2 pr-3 text-right w-12">Rec</th>
                        </tr>
                    </thead>
                    <tbody id="standings-body" class="divide-y divide-gray-100">
                        <!-- Injected via JS -->
                    </tbody>
                </table>
            </div>

            <!-- Tiebreaker Info / Legend -->
            <div class="p-3 bg-gray-50 text-[10px] text-gray-500 border-t border-gray-200 shrink-0 space-y-1">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500"></div> <span>Playoff Berth</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-yellow-500"></div> <span>On the Bubble</span>
                </div>
                <div class="mt-2 pt-2 border-t border-gray-200">
                    <strong>Tiebreakers Applied:</strong> H2H > Conf > Common. <br>
                    <span class="italic text-gray-400">Note: Complex 3+ team ties use simplified logic.</span>
                </div>
            </div>
        </div>
    </div>

<script>
    // --- 1. CONFIGURATION ---

    // Team Data (Records entering Week 15)
    // Colors are primary hex codes
    const teams = {
        "KC":  { name: "Chiefs",   w: 6, l: 7, t: 0, confW: 3, confL: 5, color: "#E31837" },
        "HOU": { name: "Texans",   w: 8, l: 5, t: 0, confW: 7, confL: 3, color: "#03202f" },
        "IND": { name: "Colts",    w: 8, l: 5, t: 0, confW: 5, confL: 4, color: "#002C5F" },
        "BUF": { name: "Bills",    w: 9, l: 4, t: 0, confW: 7, confL: 2, color: "#00338D" },
        "BAL": { name: "Ravens",   w: 6, l: 7, t: 0, confW: 3, confL: 6, color: "#241773" },
        "MIA": { name: "Dolphins", w: 6, l: 7, t: 0, confW: 4, confL: 5, color: "#008E97" },
        "PIT": { name: "Steelers", w: 7, l: 6, t: 0, confW: 5, confL: 3, color: "#FFB612" },
        "LAC": { name: "Chargers", w: 9, l: 4, t: 0, confW: 7, confL: 2, color: "#0080C6" },
        "DEN": { name: "Broncos",  w: 11, l: 2, t: 0, confW: 7, confL: 2, color: "#FB4F14" },
        "NE":  { name: "Patriots", w: 11, l: 2, t: 0, confW: 7, confL: 1, color: "#002244" },
        "CIN": { name: "Bengals",  w: 4, l: 9, t: 0, confW: 2, confL: 7, color: "#fb4f14" }, // Spoiler role
        "JAX": { name: "Jaguars",  w: 9, l: 4, t: 0, confW: 6, confL: 4, color: "#006778" } // Division leader role
    };

    // The Games (Weeks 15-18)
    // Tag: 'KC' means it directly involves Chiefs. 'RIVAL' means direct WC competition.
    // 'note' field added for Rooting Guide
    const schedule = [
        // WEEK 15
        { id: "w15-kc-lac",  week: 15, away: "LAC", home: "KC",  tag: "KC", importance: 10, note: "Root for Chiefs (Must Win)" },
        { id: "w15-ind-sea", week: 15, away: "IND", home: "SEA", tag: "RIVAL", importance: 9, note: "Root for Seahawks" },
        { id: "w15-hou-ari", week: 15, away: "HOU", home: "ARI", tag: "RIVAL", importance: 9, note: "Root for Cardinals" },
        { id: "w15-bal-cin", week: 15, away: "BAL", home: "CIN", tag: "RIVAL", importance: 7, note: "Root for Bengals" },
        { id: "w15-mia-pit", week: 15, away: "MIA", home: "PIT", tag: "RIVAL", importance: 8, note: "Root for Steelers (Beat WC threat)" }, 
        { id: "w15-buf-ne",  week: 15, away: "BUF", home: "NE",  tag: "SEED", importance: 5, note: "Root for Patriots (Catch Bills?)" },

        // WEEK 16
        { id: "w16-kc-ten",  week: 16, away: "KC",  home: "TEN", tag: "KC", importance: 10, note: "Root for Chiefs" },
        { id: "w16-hou-lv",  week: 16, away: "LV",  home: "HOU", tag: "RIVAL", importance: 8, note: "Root for Raiders" },
        { id: "w16-ind-sf",  week: 16, away: "SF",  home: "IND", tag: "RIVAL", importance: 8, note: "Root for 49ers" },
        { id: "w16-lac-dal", week: 16, away: "LAC", home: "DAL", tag: "RIVAL", importance: 7, note: "Root for Cowboys" }, 
        { id: "w16-pit-det", week: 16, away: "PIT", home: "DET", tag: "RIVAL", importance: 6, note: "Root for Lions" },
        { id: "w16-mia-cin", week: 16, away: "CIN", home: "MIA", tag: "RIVAL", importance: 5, note: "Root for Bengals" },
        { id: "w16-bal-ne",  week: 16, away: "NE",  home: "BAL", tag: "RIVAL", importance: 6, note: "Root for Patriots" },

        // WEEK 17
        { id: "w17-kc-den",  week: 17, away: "DEN", home: "KC",  tag: "KC", importance: 10, note: "Root for Chiefs" },
        { id: "w17-hou-lac", week: 17, away: "HOU", home: "LAC", tag: "RIVAL", importance: 10, note: "Root for Chargers (KC loses tiebreak to HOU)" }, // Huge note here
        { id: "w17-ind-jax", week: 17, away: "JAX", home: "IND", tag: "RIVAL", importance: 8, note: "Root for Jaguars" },
        { id: "w17-pit-cle", week: 17, away: "PIT", home: "CLE", tag: "RIVAL", importance: 6, note: "Root for Browns" },
        { id: "w17-mia-tb",  week: 17, away: "TB",  home: "MIA", tag: "RIVAL", importance: 5, note: "Root for Bucs" },
        { id: "w17-bal-gb",  week: 17, away: "BAL", home: "GB",  tag: "RIVAL", importance: 5, note: "Root for Packers" },

        // WEEK 18
        { id: "w18-kc-lv",   week: 18, away: "KC",  home: "LV",  tag: "KC", importance: 10, note: "Root for Chiefs" },
        { id: "w18-hou-ind", week: 18, away: "IND", home: "HOU", tag: "RIVAL", importance: 10, note: "Root for Colts (KC owns tiebreak over IND)" }, // Strategic note
        { id: "w18-lac-den", week: 18, away: "LAC", home: "DEN", tag: "RIVAL", importance: 8, note: "Root for Broncos" },
        { id: "w18-bal-pit", week: 18, away: "BAL", home: "PIT", tag: "RIVAL", importance: 9, note: "Root for Steelers" }, 
        { id: "w18-mia-ne",  week: 18, away: "MIA", home: "NE",  tag: "RIVAL", importance: 6, note: "Root for Patriots" },
    ];

    // Known Head-to-Head Tiebreakers (1 = TeamA wins, -1 = TeamB wins)
    // Based on previous results and 2025 season data provided
    const tiebreakers = {
        "HOU-KC": 1,  // Texans beat KC
        "KC-IND": 1,  // KC beat Colts
        "BUF-KC": 1,  // Bills beat KC
        "KC-BAL": 1,  // KC beat Ravens
        "KC-CIN": 1,  // KC beat Bengals
        "JAX-KC": 1,  // Jags beat KC
        "KC-MIA": 1,  // KC has conference record edge over MIA currently
        "DEN-KC": 0,  // Split? Assume division record logic later
        "LAC-KC": 0   // Split? Assume division record logic later
    };

    // State
    let selections = {};

    // --- 2. LOGIC ---

    function init() {
        schedule.forEach(g => selections[g.id] = null);
        renderSchedule();
        updateStandings();
    }

    function getWinner(gameId) {
        if (!selections[gameId]) return null;
        const game = schedule.find(g => g.id === gameId);
        return selections[gameId] === 'away' ? game.away : game.home;
    }

    function getRecord(teamCode) {
        // Deep copy
        let t = JSON.parse(JSON.stringify(teams[teamCode]));
        if (!t) return { w: 0, l: 0, confW: 0, confL: 0 }; // Fallback for non-listed teams

        schedule.forEach(game => {
            const result = selections[game.id];
            if (!result) return;

            const winner = result === 'away' ? game.away : game.home;
            const loser = result === 'away' ? game.home : game.away;

            // Update Overall
            if (winner === teamCode) t.w++;
            if (loser === teamCode) t.l++;

            // Update Conference (Simplified: All listed teams are AFC except non-listed)
            // We check if the OPPONENT is an AFC team. 
            // Actually, for simplicity in this engine, we assume all listed games are AFC vs AFC
            // EXCEPT for specifically named NFC opponents (SEA, ARI, SF, DAL, DET, GB, TB, PHI, WAS, NYG, CHI, MIN, LAR, CAR, ATL, NO)
            const nfcTeams = ["SEA", "ARI", "SF", "DAL", "DET", "GB", "TB", "PHI", "WAS", "NYG", "CHI", "MIN", "LAR", "CAR", "ATL", "NO"];
            
            if (winner === teamCode) {
                // If I won, check if I beat an AFC team.
                const opponent = (winner === game.away) ? game.home : game.away;
                if (!nfcTeams.includes(opponent)) t.confW++;
            }
            if (loser === teamCode) {
                const opponent = (loser === game.away) ? game.home : game.away;
                if (!nfcTeams.includes(opponent)) t.confL++;
            }
        });
        return t;
    }

    function compareTeams(idA, idB, teamA, teamB) {
        // 1. Overall Record
        if (teamA.w !== teamB.w) return teamB.w - teamA.w;

        // 2. Head-to-Head (Check predefined map)
        const key1 = `${idA}-${idB}`;
        const key2 = `${idB}-${idA}`;
        
        if (tiebreakers[key1]) return -tiebreakers[key1]; // If idA beats idB (1), return -1 to put A first
        if (tiebreakers[key2]) return tiebreakers[key2];  // If idB beats idA (1), return 1 to put B first

        // Special Case: KC vs LAC (If KC wins W15, they split 1-1)
        // If we selected KC to win W15...
        if ((idA === 'KC' && idB === 'LAC') || (idA === 'LAC' && idB === 'KC')) {
            const w15 = selections['w15-kc-lac'];
            // If KC wins W15, they are 1-1. Move to Div/Common. 
            // Simulator Simplification: Give edge to KC on common games/div logic if tie
            if (w15 === 'home') return (idA === 'KC') ? -1 : 1; 
        }

        // 3. Conference Record
        if (teamA.confW !== teamB.confW) return teamB.confW - teamA.confW;

        // 4. Alphabetical Fallback (Simulator limitation)
        return idA.localeCompare(idB);
    }

    function updateStandings() {
        // Calculate all records first
        const liveTeams = [];
        Object.keys(teams).forEach(id => {
            // Only rank the main contenders, ignore purely spoiler teams like Bengals if they have low wins
            // But we need Bengals in list to update their record properly
            const rec = getRecord(id);
            liveTeams.push({ id: id, ...rec });
        });

        // Sort
        liveTeams.sort((a, b) => compareTeams(a.id, b.id, a, b));

        // Render
        const tbody = document.getElementById('standings-body');
        tbody.innerHTML = '';
        
        let chiefsRank = 0;
        let chiefsIn = false;

        // Filter out teams with <= 6 wins that aren't KC (clean up display)
        // Actually keep them for context
        
        liveTeams.forEach((team, index) => {
            const rank = index + 1;
            const isKC = team.id === 'KC';
            if (isKC) chiefsRank = rank;

            const tr = document.createElement('tr');
            tr.className = `team-row border-b border-gray-50 ${isKC ? 'bg-red-50' : 'hover:bg-gray-50'}`;
            
            // Rank Badge
            let rankColor = "text-gray-400";
            if (rank <= 7) rankColor = "text-green-600 font-bold";
            if (rank > 7 && rank <= 9) rankColor = "text-yellow-600 font-bold";
            
            // Row Content
            tr.innerHTML = `
                <td class="py-2.5 pl-3 ${rankColor} seed-badge">${rank}</td>
                <td class="py-2.5">
                    <div class="flex items-center gap-2">
                        <!-- Color Dot -->
                        <div class="w-1.5 h-8 rounded-full" style="background-color: ${teams[team.id].color}"></div>
                        <div class="flex flex-col">
                            <span class="font-bold text-gray-800 leading-none ${isKC ? 'text-red-700 text-base' : 'text-sm'}">
                                ${teams[team.id].name}
                            </span>
                            <span class="text-[10px] text-gray-400">AFC ${team.confW}-${team.confL}</span>
                        </div>
                    </div>
                </td>
                <td class="py-2.5 pr-3 text-right font-mono font-bold text-gray-700">
                    ${team.w}-${team.l}
                </td>
            `;
            tbody.appendChild(tr);
        });

        updateBanner(chiefsRank, liveTeams.find(t => t.id === 'KC'));
    }

    function updateBanner(rank, kcStats) {
        const banner = document.getElementById('status-banner');
        const container = document.getElementById('status-container');
        
        // Logic
        if (rank <= 7) {
            banner.className = "px-4 py-2 rounded bg-green-600 text-white font-bold text-sm md:text-base shadow-lg transition-all border border-green-400";
            banner.innerHTML = `<i class="fas fa-check-circle mr-2"></i>CHIEFS ARE IN THE PLAYOFFS (Seed #${rank})`;
        } else if (rank <= 9) {
            banner.className = "px-4 py-2 rounded bg-yellow-500 text-white font-bold text-sm md:text-base shadow-lg transition-all border border-yellow-300";
            banner.innerHTML = `<i class="fas fa-exclamation-triangle mr-2"></i>ON THE BUBBLE (Seed #${rank})`;
        } else {
            // Check for Mathematical Elimination (Simple check: Max wins < 7th seed wins?)
            // This is complex, so we will stick to "Outside Looking In"
            banner.className = "px-4 py-2 rounded bg-[#E31837] text-white font-bold text-sm md:text-base shadow-lg transition-all border border-red-400";
            banner.innerHTML = `<i class="fas fa-times-circle mr-2"></i>OUTSIDE LOOKING IN (Seed #${rank})`;
        }
    }

    // --- 3. RENDER UI ---

    function renderSchedule() {
        const container = document.getElementById('schedule-container');
        container.innerHTML = '';

        const weeks = [15, 16, 17, 18];
        
        weeks.forEach(week => {
            const weekGames = schedule.filter(g => g.week === week);
            if(weekGames.length === 0) return;

            // Section Header
            const header = document.createElement('div');
            header.className = "flex items-center gap-2 mb-2 mt-4 first:mt-0";
            header.innerHTML = `
                <div class="h-px bg-gray-300 flex-1"></div>
                <span class="text-xs font-bold text-gray-400 uppercase tracking-widest">Week ${week}</span>
                <div class="h-px bg-gray-300 flex-1"></div>
            `;
            container.appendChild(header);

            // Grid
            const grid = document.createElement('div');
            grid.className = "grid grid-cols-1 lg:grid-cols-2 gap-3";

            weekGames.forEach(game => {
                const isKC = game.tag === 'KC';
                const el = document.createElement('div');
                
                // Dynamic styling based on selection
                const currentSel = selections[game.id];
                let borderColor = "border-transparent";
                if (currentSel === 'away') borderColor = "border-l-4 border-l-gray-600"; 
                if (currentSel === 'home') borderColor = "border-l-4 border-l-gray-600";
                if (isKC && currentSel === 'home') borderColor = "border-l-4 border-l-[#E31837]";

                el.className = `game-card bg-white p-3 rounded-lg shadow-sm border border-gray-200 flex flex-col gap-2 ${borderColor}`;
                
                // Labels
                let badge = "";
                if (isKC) badge = `<span class="bg-red-100 text-red-700 text-[9px] px-1.5 py-0.5 rounded font-bold uppercase">Must Win</span>`;
                else if (game.tag === 'RIVAL') badge = `<span class="bg-blue-50 text-blue-700 text-[9px] px-1.5 py-0.5 rounded font-bold uppercase">Key Game</span>`;

                // Rooting Note
                let noteHtml = "";
                if (game.note) {
                    noteHtml = `<div class="text-[10px] text-gray-500 italic flex items-center gap-1.5 bg-gray-50 px-2 py-1 rounded"><i class="fas fa-bullhorn text-gray-400"></i>${game.note}</div>`;
                }

                // HTML structure
                el.innerHTML = `
                    <div class="flex justify-between items-start">
                        <span class="text-[10px] text-gray-400 font-mono">${game.away} @ ${game.home}</span>
                        ${badge}
                    </div>
                    ${noteHtml}
                    <div class="flex gap-1 w-full mt-auto pt-1">
                        <button onclick="pick('${game.id}', 'away')" 
                            class="flex-1 py-1.5 rounded text-xs font-bold transition-colors border ${getBtnClass(game.id, 'away', game.away)}">
                            ${teams[game.away]?.name || game.away}
                        </button>
                        <button onclick="pick('${game.id}', 'home')" 
                            class="flex-1 py-1.5 rounded text-xs font-bold transition-colors border ${getBtnClass(game.id, 'home', game.home)}">
                            ${teams[game.home]?.name || game.home}
                        </button>
                    </div>
                `;
                grid.appendChild(el);
            });
            container.appendChild(grid);
        });
    }

    function getBtnClass(gameId, side, teamCode) {
        const s = selections[gameId];
        const teamColor = teams[teamCode]?.color || '#4b5563';
        
        if (s === side) {
            // Selected
            return `bg-gray-800 text-white border-gray-800 shadow-inner`;
        }
        // Not Selected
        return `bg-white text-gray-600 hover:bg-gray-50 border-gray-200`;
    }

    // Exposed to Window
    window.pick = function(gameId, side) {
        if (selections[gameId] === side) selections[gameId] = null; // Toggle off
        else selections[gameId] = side;
        
        renderSchedule(); // Re-render buttons
        updateStandings(); // Re-calc math
    };

    window.resetSimulation = function() {
        init();
    };

    // Start
    init();

</script>
</body>
</html>
